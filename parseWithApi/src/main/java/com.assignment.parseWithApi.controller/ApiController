package com.assignment.parseWithApi.controller;

import java.io.IOException;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import com.assignment.parseWithApi.service.ApiService;
import com.assignment.parseWithApi.vo.ResultVo;
import com.assignment.parseWithApi.vo.RootVo;

@RestController
public class ApiController {
	
	
	@Autowired
	private ApiService apiService;
	
	
	@GetMapping("/table")
	public List<RootVo> getTable() throws IOException {
		
		String 				targetUrl 		=	 "https://finlife.fss.or.kr/finlifeapi/savingProductsSearch.json";
		String   			authKey 		= 	 "276dd7404eab954cd893284d19131536";
		String				topFinGrpNo		=	 "030300";	// 저축은행
		int					pageNo			=	  1;
		String				rqstURL			=	 targetUrl + "?auth=" + authKey + 
												 "&topFinGrpNo=" + topFinGrpNo + 
												 "&pageNo=" + pageNo;
		
		List<RootVo> resultList = apiService.getResult(rqstURL);
		return resultList;
		
	}

}
